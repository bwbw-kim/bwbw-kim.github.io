---
title: π„ HTTPS κ°€ μ–΄λ–»κ² λ™μ‘ν•λ”μ§€ μ•μ•„λ³΄μ! (feats. λ€μΉ­ν‚¤, λΉ„λ€μΉ­ν‚¤) (https://)
date: 2023-09-06
categories: [network]
tags: [https, public key, private key]
render_with_liquid: true
mermaid: true
---
#### https λ” λ­κΉ?
---
https λ” http + Secure μ΄λ‹¤! http λ³΄λ‹¤ ν›¨μ”¬ λ³΄μ•μ΄ κ°•ν™”λ κ²ƒμ΄λ‹¤. μ›λ http ν†µμ‹ μ„ ν•  λ•λ” μ¤κ³ κ°€λ” λ„¤νΈμ›ν¬ packet μ— μ•”νΈν™”κ°€ λμ–΄μμ§€ μ•κΈ°μ— μ¤‘κ°„μ— λ„κµ°κ°€ packet μ„ κ°€λ΅μ±λ‹¤λ©΄ λ‚΄κ°€ λ³΄λ‚Έ request λ¥Ό ν›¤ν•κ² λ‹¤ λ“¤μ—¬λ‹¤ λ³Ό μ μκ² λλ‹¤!
μ—¬κΈ°μ— μ‚¬μ΄νΈ λ΅κ·ΈμΈν• λ• μ‚¬μ©ν•λ” λΉ„λ°€λ²νΈλΌλ„ μμΌλ©΄ ν°μΌμ΄λ‹¤!

#### Https μ›λ¦¬λ” λ­κΉ?
---
Https λ” λ€μΉ­ν‚¤μ™€ λΉ„λ€μΉ­ν‚¤ κ°λ…μ„ μ΄ν•΄ν•΄μ•Όν•λ‹¤!

μ°μ„  λ€μΉ­ν‚¤λ” μ•”νΈν™” λ³µνΈν™”μ— μ‚¬μ©λλ” ν‚¤κ°€ κ°™μ€κ²ƒμ„ μλ―Έν•λ‹¤. μ¦‰
A μ—μ„ Z λ΅ μ•”νΈν™”κ°€ λκΈ°μ„ν•΄ μ‚¬μ©ν• ν‚¤λ¥Ό symKey λΌκ³  ν•λ©΄ 
Z μ—μ„ A λ΅ λ³µνΈν™” μ¦‰ λ‹¤μ‹ λλ¦΄λ•λ„ symKey λ¥Ό μ‚¬μ©ν•λ‹¤.
μ†λ„κ°€ λ§¤μ° λΉ λ¥΄κ³  λ‹¨μν•λ‹¤

λΉ„λ€μΉ­ν‚¤λ” μ•”νΈν™” λ³µνΈν™”μ— μ‚¬μ©λλ” ν‚¤κ°€ μ„λ΅ λ‹¤λ¥Έκ²ƒμ„ μλ―Έν•λ‹¤.
A μ—μ„ W λ΅ μ•”νΈν™”κ°€ λκΈ° μ„ν•΄ μ‚¬μ©ν• ν‚¤λ¥Ό asymKey1 μ΄λΌκ³  ν•λ©΄
W μ—μ„ A λ΅ λ³µνΈν™” ν•κΈ°μ„ν•΄μ„  asymKey1 μ΄ μ•„λ‹ asymKey2 κ°€ ν•„μ”ν•λ‹¤!
(asymKey2 λ΅ μ•”νΈν™”ν•λ©΄ asymKey1 μΌλ΅ λ³µνΈν™” ν•  μ μλ‹¤)
μ†λ„κ°€ λλ¦¬κ³  λ³µμ΅ν•λ‹¤
λ„λ¬΄ μ‹ κΈ°ν•λ‹¤! μν•™μ μΈ μ›λ¦¬κ°€ μλ‹¤κ³  ν•λ‹¤ μ•„λλ” μ•½κ°„μ μμ‹μ΄λ‹¤!

```
(x^7) mod 187 [μ•”νΈν™”]
(x^23) mod 187 [λ³µνΈν™”]
μ•”νΈν™” λ³µνΈν™”λ¥Ό λ‘λ‹¤ κ±°μΉλ©΄ μ›λ μ«μκ°€ λ‚μ¨λ‹¤!
```

#### λΉ„λ€μΉ­ν‚¤ λ€μΉ­ν‚¤λ¥Ό μ–΄λ–»κ² μ‚¬μ©ν• κΉ?
---
μ„λ²„λ” κ·Έλμ„ asymKey2 λ¥Ό κ°€μ§€κ³  μκ³  client λ” asymKey1μ„ κ°€μ§€κ³  μλ‹¤λ©΄ μ¤‘κ°„μ— κ°€λ΅μ±„μ Έλ„ μ•”νΈν™”λ packet λ§ λ‚¨μ„ν…λ‹ μƒκ΄€μ΄ μ—†μ„κ²ƒμ΄λ‹¤! μ΄λ• client κ°€ κ°€μ§€κ³  μλ” key λ¥Ό publickey λΌκ³  ν•κ³  server κ°€ κ°€μ§€κ³ μλ” key λ¥Ό private key λΌκ³  ν•λ‹¤.
ν•μ§€λ§ μ‹¤μ λ΅ https ν†µμ‹ μ„ ν• λ•λ” public key λ§μΌλ΅ μ•”νΈν™”ν•λ”κ²ƒμ€ μ•„λ‹λ‹¤! μ™λƒλ©΄ λΉ„λ€μΉ­ν‚¤λ” μ†λ„κ°€ λλ¦¬λ‹κΉ. μ΅°κΈλ” λ³µμ΅ν•λ° μ•„λμ— μ •λ¦¬λ¥Ό ν•΄λ³΄κ² λ‹¤!


μμ„κ°€ λ³µμ΅ν•λ‹ μ λ”°λΌ μ™€μ•Όν•λ‹¤! 
1. [Client] TLS Handshake λ¥Ό μ‹μ‘ν•λ‹¤. Client κ°€ Server μ— Hello λ¥Ό λ³΄λ‚Έλ‹¤.
2. [Server] μ„λ²„κ°€ Hello λ¥Ό λ³΄λ‚Έλ‹¤. μ΄λ• public key λ¥Ό μ¤€λ‹¤. κ·Έλ¦¬κ³  random password λ„ λ³΄λ‚Έλ‹¤.
3. [Client] public key κ°€ μΈμ¦λ λ°ν–‰κΈ°κ΄€μ—μ„ μΈμ¦λκ²ƒμΈμ§€ ν™•μΈν•λ‹¤.
4. [Client] client κ°€ random password λ¥Ό server μ—κ² μ¤€λ‹¤. μ΄λ• public key λ΅ μ•”νΈν™” ν•΄μ„ μ¤€λ‹¤.
5. [Server] μ„λ²„λ” random password λ¥Ό private key λ΅ ν•΄λ…ν•λ‹¤
6. [Client, Server] μ–‘μΈ΅ λ¨λ‘ λ¬΄μ‘μ„ μ„λ΅μ random password λ¥Ό κ°€μ§€κ³  session key (μ΄κ±΄ λ€μΉ­ν‚¤μ΄λ‹¤) λ¥Ό μƒμ„±ν•λ‹¤. μ¤μ§ μ΄λ² Client μ™€ Server μ‚¬μ΄μ—μ„λ§ μ ν¨ν• Session Key μ΄λ‹¤.
7. [Client, Server] client, server μμΌλ΅ μ™„λ£ λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ‹¤
8. ν†µμ‹ μ„ μ„ν• λ¨λ“  μ¤€λΉ„κ°€ μ™„λ£λκ³  μ„Έμ…ν‚¤λ¥Ό μ΄μ©ν•΄ ν†µμ‹ μ΄ κ³„μ† μ§„ν–‰λλ‹¤.


#### p12, pfxλ” λ­κΉ?
---
p12 μ™€ pfx λ” private κ·Έλ¦¬κ³  public key κ°€ λ‘λ‹¤ ν¬ν•¨λμ–΄μλ” νμΌμ΄λ‹¤! λ”°λΌμ„ μ΄ νμΌμ€ λ³ΈμΈκ³Ό μ„λ²„λ§ μ•λ„λ΅ ν•΄μ£Όμ!