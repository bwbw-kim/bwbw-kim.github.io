---
title: ğŸ“š ê°„ë‹¨í•œ Junit Testcase ë§Œë“¤ì–´ë³´ê¸°!
date: 2023-10-20
categories:
  - Spring & JAVA
tags:
  - Junit
  - spring
render_with_liquid: true
mermaid: true
---
#### UnitTest ì¶”ê°€í•˜ê¸°
---
ìš°ë¦¬ Q&A í”Œë«í¼ì€ ì•ë§Œ ë³´ê³  ë‹¬ë ¤ì™”ë‹¤! ì´ì œ ì–´ëŠì •ë„ ì„±ê³¼ë„ ì´ë¤˜ê³  ì¡°ê¸ˆì”©ì€ ì•ˆì •ì„ì— ì‹ ê²½ì„ ì“¸ë•Œê°€ ì˜¤ê³  ìˆë‹¤ ê·¸ì— ëŒ€í•œ ì²« ê±¸ìŒì€ ë°”ë¡œ Unit Test ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì´ë‹¤! Unit Test ëŠ” ë¯¸ë¦¬ ìš”êµ¬ì‚¬í•­ì´ ë“¤ì–´ì™”ì„ë•Œ í–ˆì—ˆìœ¼ë©´ ì°¸ ì¢‹ì•˜ì„ê±° ê°™ì€ë° ì•„ì‰½ê²Œë„ ê·¸ëŸ¬ì§€ ëª»í–ˆê¸°ì— ì§€ê¸ˆì´ë¼ë„ ë³´ì¶©í•˜ì—¬ ì‹ ì…ê°œë°œìë“¤ì´ ì˜¤ê±°ë‚˜ í° ê¸°ëŠ¥ ê°œë°œì´ ìˆì„ë–„ TCë¥¼ ëŒë ¤ë³´ë©´ì„œ ì•ˆì •ê°ìˆê²Œ ê°œë°œì„ í•  ê²ƒì´ë‹¤!

#### Junit ì˜ ê¸°ë³¸!
---
ìš°ì„  ìš°ë¦¬ê°€ í…ŒìŠ¤íŠ¸ í•˜ë ¤ê³  í•˜ëŠ” Class ë¥¼ Byungwook ì´ë¼ê³  í•˜ë‚˜ ë§Œë“¤ì–´ ë³´ì
```java
// src/main/java/com/test/utils/Byungwook.java
@Component
public class Byungwook {

	public String makeSpaceId(String spaceName) {
		return String.format("%s:%s", "space", spacename);
	}

	public String extractSpaceName(String spaceId) {
        int colonIndex = spaceId.indexOf(':');
	    if (colonIndex < 0) return "";
        return input.substring(colonIndex + 1);
    }
}
```

spaceName ìœ¼ë¡œ qna ë¥¼ ë„£ì—ˆë‹¤ë©´ `space:qna` ë¥¼ ë¦¬í„´í•˜ëŠ” ê°„ë‹¨í•œ makeSpaceId ë©”ì†Œë“œê°€ ìˆë‹¤. ë˜ spaceId ë¥¼ ë°›ìœ¼ë©´ spaceName ì„ ë¦¬í„´í•˜ëŠ” ë©”ì†Œë“œë„ ìˆë‹¤.
ì´ ì¹œêµ¬ë“¤ì˜ TestCaseë¥¼ ë§Œë“¤ì–´ ë³´ì! ìš°ì„  test directory ë¥¼ ë§Œë“¤ì–´ ì£¼ê³  ê·¸ ì•ˆì— ê°™ì€ êµ¬ì¡°ë¡œ í´ë”ë¥¼ êµ¬ì„±í•œë‹¤

```java
// src/test/java/com/test/utils/ByungwookTest.java

package com.test.utils;

public class ByungwookTest {

}
```

ê·¸ë¦¬ê³  ê·¸ ì•„ë˜ì— TestCase ë¥¼ í•˜ë‚˜ì”© ë§Œë“¤ì–´ ì£¼ë©´ ëœë‹¤. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ë§Œë“¤ë•Œ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ì ì¸ annotation ì´ ëª‡ê°€ì§€ ìˆë‹¤.
```java
@BeforeClass // í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ì‹¤í–‰ ì œì¼ ì „ì— í•œë²ˆ ì‹¤í–‰
@AfterClass // í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ì‹¤í–‰ ë§ˆì§€ë§‰ì— í•œë²ˆ ì‹¤í–‰
@Before // ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰ ì „ì— ê°ê° í•œë²ˆì”© ì‹¤í–‰
@After // ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰ í›„ì— ê°ê° í•œë²ˆì”© ì‹¤í–‰
@Test // ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
```
ë”°ë¼ì„œ ì²˜ìŒì— ì§„í–‰í•´ì•¼í•˜ê±°ë‚˜ initialize í•´ì•¼í•  ì •ë³´ë“¤ì´ ìˆìœ¼ë©´ ì € annotation ì„ methodìœ„ì— ì ì–´ì„œ ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤! 
ë˜ assert ë¥¼ ì´ìš©í•´ì„œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê°’ì´ ë‚˜ì™”ëŠ”ì§€ í™•ì¸ì„ ì£¼ë¡œ í•˜ëŠ”ë° ë³´í†µ Assert.* ë¥¼ ì„í¬íŠ¸í•´ì„œ ì‚¬ìš©í•˜ê³  ìˆë‹¤. 
```
import static org.junit.Assert.*;
```
ì¢…ë¥˜ëŠ” ë‹¤ì–‘í•˜ì§€ë§Œ ë‚´ê°€ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ”ê²ƒì€ ì´ì •ë„ì´ë‹¤

```java
assertTrue(condition); // condition ì´ true ë©´ ì„±ê³µ
assertFalse(condition); // condition ì´ false ë©´ ì„±ê³µ
assertEquals(expected, actual); // expectedÂ ì™€Â actualÂ ì˜ ê°’ì´ ê°™ìœ¼ë©´ ì„±ê³µ
assertSame(expected, actual); // expectedì™€Â actualì´ ê°™ì€ ì£¼ì†Œê°’ì´ë©´ ì„±ê³µ
assertNull(actual); // actuaã…£ì´Â nullì´ë©´ ì„±ê³µ
assertNotNull(actual); // actualì´ null ì´ ì•„ë‹ˆë©´ ì„±ê³µ

```
ê·¸ëŸ¬ë©´ ìœ„ì˜ TestCase ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±ì„ í•´ ë³¼ ìˆ˜ ìˆì„ê²ƒì´ë‹¤!

#### ì˜ˆì‹œ TestCase
---
TestCase ë¥¼ ì‘ì„±í• ë•Œ ìš°ë¦¬ëŠ” ìš°ë¦¬ë¼ë¦¬ ì •í•œ ground rule ì´ ìˆë‹¤.
1. given, when, then ì„ ì‘ì„±í•´ ì£¼ëŠ”ê²ƒì´ ë‚˜ì¤‘ì— TC ë¥¼ ìˆ˜ì •í• ë•Œ ì•„ì£¼ ì¢‹ë‹¤!
2. ê·¸ë¦¬ê³  TC ì˜ ì´ë¦„ì€ TCì˜ ì´ë¦„ë§Œ ë³´ì•„ë„ ì–´ë–¤ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰ì¤‘ì¸ì§€ ì•Œìˆ˜ ìˆë„ë¡ ìš°ë¦¬ëŠ” `should + {ì›í•˜ëŠ” í–‰ë™} + when + {ì£¼ì–´ì§„ ìƒí™©}` ì´ëŸ° í˜•ì‹ìœ¼ë¡œ ì‘ì„±ì„ í•˜ê³  ìˆë‹¤


```java
// src/test/java/com/test/utils/ByungwookTest.java

package com.test.utils;

import static org.junit.Assert.*;

public class ByungwookTest {

	Byungwook byungwook;

	@Before
	public class setUp() {
		//Given
		byungwook = new Byungwook();
	}

	@Test
	public class shouldGetProperSpaceIdWhenGetIdFromSpaceName () {
		//When
		String spaceName = "sample";
		String actualSpaceId = byungwook.makeSpaceId(spaceName);

		//Then
		String expectedSpaceId = "space:sample";
		assertEquals(expectedSpaceId, actualSpaceId);
		
	}

	@Test
	public class shouldGetEmptySpaceNameWhenExtractNameFromInvalidSpaceId() {
		//When
		String invalidSpaceID = "invalid";
		String actualSpaceName = byungwook.extractSpaceName(invalidSpaceID);

		//Then
		String expectedSpaceName = "";
		assertEquals(expectedSpaceName, actualSpaceName);
	}
}
```

#### ì´ë ‡ê²Œ Test ë¥¼ ì‘ì„± í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ê°€ ìˆë‹¤.
---
ë°”ë¡œ ë‹¤ë¥¸ Class ì— ì˜ì¡´í•˜ê³  ìˆëŠ” ê²½ìš°ë‹¤ ì œì¼ ìì£¼ ë°œìƒí•˜ëŠ” ê²ƒì´ DB ì™€ ì—°ê²°ì´ ë˜ëŠ” Class ì™€ ì˜ì¡´ì„±ì´ ìˆëŠ” ê²½ìš° ì¸ë° ì´ëŸ° ê²½ìš°ì—ëŠ” Mock ì´ë¼ëŠ” ê°œë…ì„ í™œìš© í•´ì•¼ í•œë‹¤! Mock ì€ ë‹¤ìŒë²ˆì— ì •ë¦¬í•˜ë„ë¡ í•˜ê² ë‹¤!