---
title: ğŸ’ LuckyBag ì´ë²¤íŠ¸ Cheating ë°©ì§€í•˜ê¸°
date: 2024-01-29
categories: [Front]
tags: [event, security]
render_with_liquid: true
mermaid: true
---
#### ë³µì£¼ë¨¸ë‹ˆ ì´ë²¤íŠ¸ë¥¼ ì—´ì—ˆë‹¤
---
ì„¤ë‚ ì„ ë§ì´ í•˜ì—¬ ì‚¬ì´íŠ¸ì—ì„œ ë³µì£¼ë¨¸ë‹ˆ ì´ë²¤íŠ¸ë¥¼ ì—´ì—ˆë‹¤. ì‚¬ì´íŠ¸ ê³³ê³³ì— ë³µì£¼ë¨¸ë‹ˆ ì´ë¯¸ì§€ë¥¼ ê½ê½ ìˆ¨ê²¨ë‘ê³  ê·¸ ì´ë¯¸ì§€ë¥¼ ëˆ„ë¥´ë©´ ë³µì£¼ë¨¸ë‹ˆê°€ í•˜ë‚˜ì”© í•˜ë‚˜ì”© ìŒ“ì´ëŠ” ì´ë²¤íŠ¸ì´ë‹¤! ì‹¤ì œë¡œ ë°ëª¨ë¡œ ë‚´ë¶€ì ìœ¼ë¡œ ì§„í–‰í•´ ë³´ì•˜ì„ë•Œë„ ì‚¬ëŒë“¤ì˜ ë°˜ì‘ì´ ì–´ë§ˆë¬´ì‹œí•˜ê²Œ ì¢‹ì•˜ê³  ì„±ê³µì ì¸ ì´ë²¤íŠ¸ê°€ ë ê±° ê°™ì•˜ë‹¤!

ì²˜ìŒ ê°œë°œ ê³„íšì€ ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤.

```html
<img src="ë³µì£¼ë¨¸ë‹ˆ" class="lucky-bag" title="lucky-bag-1"></img>
```

ìœ„ì˜ element ë¥¼ click í•˜ë©´
jsì—ì„œ lucky endpointë¡œ ìš”ì²­ì„ ë³´ë‚´ì£¼ê³  

```js
$(".lucky-bag").click(function () {
	let title = $(this).attr('title');
	$.ajax({
		url: '/lucky',
		type: 'POST',
		data: { luckyBag: title },
		success: function(response) {
			alert("ë³µì£¼ë¨¸ë‹ˆë¥¼ " + response.count + "ê°œ ì°¾ì•˜ìŠµë‹ˆë‹¤!")
		},
		error: function(xhr, status, error) {
			
		}
	});
})
```

spring ì—ì„œëŠ” í•´ë‹¹ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ lucky-bag-1 ë¶€í„° 30 ì‚¬ì´ ì¸ì§€ í™•ì¸í•˜ê³  return í•˜ì—¬ì¤¬ë‹¤

```java
	@PostMapping("/lucky")
    public ResponseEntity<Map<String, String>> checkLuckyBag(
            @RequestParam String luckyBag,
            HttpServletRequest request,
            HttpServletResponse response) {
        List<String> luckyBagList = CONF.getLuckyBagList();
        Profile authUser = utils.getAuthUser(request);
        if (authUser == null) return new ResponseEntity<>(null, HttpStatus.FORBIDDEN);
        if (luckyBagList.contains(luckyBag) && !authUser.getLuckyBagList().contains(luckyBag)) {
	        // count 1ê°œ ëŠ˜ë ¤ì„œ ë¦¬í„´
        }
        
    }
```

í•˜ì§€ë§Œ ì´ë ‡ê²Œ í•˜ë©´ ì‚¬ì‹¤ ì‚¬ìš©ìê°€ ê°œë°œì ë„êµ¬ ì¼œì„œ lucky-bag-1 ì´ë¼ëŠ” title ì„ ë³´ìë§ˆì ì´ê±° ë¶„ëª… ì—°ì†í•˜ëŠ” ìˆ«ìë¼ëŠ”ê±¸ ì•Œí…Œê³  cheating user ê°€ ë°œìƒ í•  ìˆ˜ ë°–ì— ì—†ì„ ê²ƒì´ë‹¤! ì—´ì‹¬íˆ ì¤€ë¹„í•œ ì´ë²¤íŠ¸ê°€... í•œìˆœê°„ì— ë¬¼ê±°í’ˆì´ ë˜ë²„ë¦´ìˆ˜ë„ ìˆì—ˆë‹¤

#### ì–´ë–»ê²Œ í•˜ë©´ ì‚¬ìš©ìë“¤ì´ ê¼¼ìˆ˜ë¥¼ ì•ˆì“¸ê¹Œ ?
---
ì‚¬ëŒë“¤ì´ ì ˆëŒ€ë¡œ ì•Œ ìˆ˜ ì—†ë„ë¡ Hash í™” í•˜ëŠ” ë°©ë²•ì„ íƒí–ˆë‹¤. 
title ì— lucky-bag-1 ì´ë¼ê³  ëª…ì‹œí•˜ì§€ ì•Šê³  SHA-256 ìœ¼ë¡œ ì•”í˜¸í™” í•˜ì—¬ 
`8efb5ac2c2e4d72d0e540ef1721dbe4b3693ffd9f868063625349cc09f15c1a8` ì´ê°’ì„ titleì— ë„£ê³  spring ì—ì„œë„ lucky-bag-1 ~ 30 ì„ SHA 256 ìœ¼ë¡œ ì•”í˜¸í™”í•œ ê°’ë“¤ ì•ˆì— ìˆìœ¼ë©´ count ë¥¼ 1 ì˜¬ë ¤ ì£¼ë„ë¡ ë°”ê¿¨ë‹¤. ì‚¬ì‹¤ ì‚¬ìš©ìê°€ hash ê°’ì„ ë³´ê³  ë¬¼ë¡ ! ì–´ì©Œë‹¤ ì°ì–´ ë§ì¶œìˆ˜ëŠ” ìˆê² ì§€ë§Œ ê·¸ë ‡ê²Œ ì°ì–´ ë§ì·„ìœ¼ë©´ ê·¸ ë“¤ì¸ ì‹œê°„ì´ ìƒë‹¹í–ˆì„ ê²ƒì´ë¯€ë¡œ ê·¸ëƒ¥ ì´ë²¤íŠ¸ ìƒí’ˆì„ ì£¼ê¸°ë¡œ í–ˆë‹¤!

```html
<img src="ë³µì£¼ë¨¸ë‹ˆ" class="lucky-bag" title="8efb5ac2c2e4d72d0e540ef1721dbe4b3693ffd9f868063625349cc09f15c1a8"/>
```

ê·¸ ê²°ê³¼! ì°¸ì—¬ìëŠ” 300ëª…ì´ í›¨ì”¬ ë„˜ì—ˆì§€ë§Œ 30ê°œì˜ ë³µì£¼ë¨¸ë‹ˆë¥¼ ëª¨ë‘ ì°¾ì€ ì‚¬ëŒì€ ë‹¨ 2ëª…ìœ¼ë¡œ cheating ì‚¬ìš©ìê°€ ì—†ì—ˆë‹¤! ì—´ì‹¬íˆ ì¤€ë¹„í•œ ì´ë²¤íŠ¸ê°€ ì„±ê³µì ì´ê³  ê¹”ë”í•˜ê²Œ ëë‚˜ì„œ ë„ˆë¬´ ë‹¤í–‰ìŠ¤ëŸ½ë‹¤...!