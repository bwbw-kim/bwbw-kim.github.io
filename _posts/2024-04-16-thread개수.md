---
title: ğŸŒ‰ íŠ¹ì • í•¨ìˆ˜ì˜ thread ê°œìˆ˜ ì œí•œí•˜ê¸°
date: 2024-04-16
categories: [Spring & JAVA]
tags: [translate, thread]
render_with_liquid: true
mermaid: true
---
#### ë²ˆì—­ API ì¸¡ì—ì„œì˜¨ ìš”ì²­ (Thread ê°œìˆ˜ ì œí•œ)
---
ë²ˆì—­ API ì—ì„œ ìš”ì²­ì‚¬í•­ì´ ë“¤ì–´ì™”ë‹¤. ì•„ì‰½ê²Œë„ ìì›ë¬¸ì œ ë•Œë¬¸ì— ë¬´í•œì • í˜¸ì¶œì„ í•˜ì§€ëŠ” ë§ê³  ë³‘ë ¬ë¡œ ìµœëŒ€ 5ê°œì˜ Request ë§Œ ë³´ë‚´ë‹¬ë¼ëŠ” ìš”ì²­ì´ì—ˆë‹¤. ê·¸ëŸ¬ë‹ˆê¹Œ 10ëª…ì´ ë™ì‹œì— "ì•ˆë…•í•˜ì„¸ìš”" ë¥¼ ì˜ì–´ë¡œ ë²ˆì—­í•´ë‹¬ë¼ê³  ìš”ì²­í•˜ë©´ 5ëª… ë¨¼ì € í•´ì£¼ê³  ë‚˜ë¨¸ì§€ 5ëª…ì€ ê·¸ ë’¤ì— ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•´ ë‹¬ë¼ëŠ” ê²ƒì´ì—ˆë‹¤.

#### Executor Service
---
Executor Service ëŠ” java ì—ì„œ ë©€í‹°ì“°ë ˆë”©ì„ ì‰½ê²Œ ë‹¤ë£°ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” íŒ¨í‚¤ì§€ì´ë‹¤! ê³¼ê±°ì— ì§„í–‰í–ˆë˜ completableFuture ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ExecutorService ëŠ” ì“°ë ˆë“œ ê°œìˆ˜ë¥¼ ìš°ë¦¬ê°€ ì¡°ì • í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì— ì•„ì£¼ í° ì¥ì ì´ ìˆë‹¤.

ìš°ì„  ì•„ë˜ì™€ ê°™ì´ class variable ë¡œ ì„ ì–¸í•´ ì¤€ë‹¤.

```java
ExecutorService executorService = Executors.newFixedThreadPool(5)
```

ê·¸ ë‹¤ìŒ Thread ë¡œ ì‹¤í–‰í•˜ê³  ì‹¶ì€ í•¨ìˆ˜ë¥¼ ì´ë ‡ê²Œ Innerclass ë¡œ ì„ ì–¸ í•´ ì¤€ë‹¤.
ê·¸ë¦¬ê³  call ë¶€ë¶„ì— ì›í•˜ëŠ” ì‘ì—…ì„ ì“°ë©´ ëœë‹¤.
*ì´ë•Œ return ê°’ì´ ì—†ëŠ” í•¨ìˆ˜ë¼ë©´ Runnable ì„ ì‚¬ìš©í•´ë„ ì¢‹ë‹¤!*

```java
public class TranslateAsync implements Callable<String> {
	private final String text;
	private final String target;
	private final String source;
	
	public TranslateAsync (String text, String target, String source) {
		this.text = text;
		this.target = target;
		this.source = source;
	}

	@Override
	public String call(){
		translationUtils.getTranslatedText(text, target, source);
	}
}

```

ê·¸ë‹¤ìŒì— ììœ ë¡­ê²Œ í•´ë‹¹ inner class ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.
```java
puvlic String utransTranslate(String text, String target, String source) {
	try {
		TranslateAsync task = new TranslateAsync(text, target, source);
		Future<String> future = executorService.submit(task);
		return future.get(); // Returnê°’ì´ ë‚˜ì˜¬ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤ëŠ” ì˜ë¯¸!
	} catch (Exception e) {
	}
}
```

#### ê¸°ì¡´ CompletableFuture ê³¼ ë‹¤ë¥¸ì 
---
ë‚´ ê¸°ì¤€ì—ì„œ ë‹¤ë¥¸ ì ì€ completableFutureì€ ì‚¬ìš© í• ë•Œ thread ê°œìˆ˜ë¥¼ ì œí•œí•˜ì§€ ì•Šê³  ì‚¬ìš©í–ˆë‹¤. ê°œë°œì¤‘ì— í•œë²ˆ Elastic Search ì— Indexing ì‘ì—…ì„ í•œ document ë§ˆë‹¤ ëª¨ë‘ completableFuture ë¡œ ìš”ì²­í–ˆë”ë‹ˆ ê°œë°œì„œë²„ë„ í˜ë“¤ì–´í•˜ê³  Elastic Search ë„ í˜ë“¤ì–´í•˜ê³  ê¹œì§ ë†€ëë˜ ê¸°ì–µì´ ìˆë‹¤. í•˜ì§€ë§Œ ExecutorService ë¥¼ ì‚¬ìš©í•˜ë©´ ì†ì‰½ê²Œ ë‚´ê°€ Thread ê°œìˆ˜ë¥¼ ì •í•˜ê³  í•  ìˆ˜ ìˆê¸°ì— ë¹ ë¥´ì§€ë§Œ ì„œë²„ì—ëŠ” ìµœëŒ€í•œ ë¬´ë¦¬ê°€ ì—†ê²Œ ê°œë°œì´ ê°€ëŠ¥í•˜ë‹¤!!