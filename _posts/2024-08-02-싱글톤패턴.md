---
title: ğŸ½ï¸ ì‹±ê¸€í†¤ íŒ¨í„´ ì´í•´í•´ë³´ê¸°
date: 2024-08-02
categories:
  - Design Pattern
tags:
  - singleton
  - design
  - creational pattern
render_with_liquid: true
mermaid: true
---
#### ì‹±ê¸€í†¤ íŒ¨í„´ì´ ë­˜ê¹Œ??
---
ì‹±ê¸€í†¤ íŒ¨í„´ì€ Spring ì—ì„œ Bean ë“¤ì´ ê°€ì§€ëŠ” í˜•íƒœì´ë‹¤. ê·¸ë˜ì„œ ê°€ì¥ ë¨¼ì € ì •ë¦¬í•´ë³´ë ¤ê³  í•œë‹¤!
ì‹±ê¸€í†¤ íŒ¨í„´ì€ ì „ì²´ í†µí‹€ì–´ì„œ ë‹¨ í•˜ë‚˜ì˜ Instance ë§Œì„ ê°€ì§€ëŠ” í˜•íƒœì´ë‹¤
ê·¸ëŸ¬ë‹ˆê¹Œ ì–´ë””ì—ì„œë“  í•´ë‹¹ íŒ¨í„´ì´ ì ìš©ëœ class ì•ˆì˜ ì–´ë–¤ ë³€ìˆ˜ì— ì ‘ê·¼í•˜ë©´ ê·¸ ê°’ì€ ê°™ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤!

#### ì½”ë“œë¡œ í™•ì¸í•´ë³´ì!
---
ì‹±ê¸€í†¤ íŒ¨í„´ì„ ë¨¼ì € ë§Œë“¤ì–´ ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```java
public class SingletonPattern {

    private static SingletonPattern instance = new SingletonPattern(); // static ìœ¼ë¡œ ì„ ì–¸í•œë‹¤.
    private int variable;
    
    private SingletonPattern() {
        this.variable = 0;
        // ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ 2ê°œì˜ instance ê°€ ìƒê¸°ê¸°ë•Œë¬¸ì— private ìœ¼ë¡œ
        // ì˜¤ì§ ë‚´ë¶€ì—ì„œë§Œ í˜¸ì¶œ ê°€ëŠ¥ í•˜ë„ë¡ í•œë‹¤.
    }

    public static SingletonPattern getInstance() {
        return instance;
    }

    public void plusOneVariable() {
        variable = variable + 1;
        return;
    }

    public int getVariable() {
        return variable;
    }
}
```

ì´ì œ ìœ„ì˜ class ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³³ì´ë‹¤.
```java
SingletonPattern sp = SingletonPattern.getInstance();
sp.plusOneVariable();
sp.getVariable();
```

ì–´ëŠê³³ì—ì„œë“  í•˜ë‚˜ì˜ ê°ì²´ê°€ ìƒì„±ì´ ë˜ì–´ìˆê³  ì–´ë””ì—ì„œë“  getVariable ì„ í•˜ë©´ ê°™ì€ ê°’ì„ ê°€ì ¸ì˜¬ìˆ˜ ìˆë‹¤

#### ì–´ë–¤ ì¥ì ì´ ìˆì„ê¹Œ?
---
ìš°ì„  ì–´ë–¤ ë°ì´í„°ë¥¼ ê³µìœ  í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ìœ„ì—ì„œì˜ variable ì€ ì–´ë””ì—ì„œë“  ê°€ì ¸ ì˜¬ ìˆ˜ ìˆë‹¤!
ê·¸ë¦¬ê³  ë‹¨ í•˜ë‚˜ì˜ class ë§Œì„ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.

#### ì–´ë–¤ ë‹¨ì ì´ ìˆì„ê¹Œ?
---
variable ì´ ëª¨ë‘ê°€ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— race condition ì´ ìƒê¸¸ìˆ˜ê°€ ìˆë‹¤! ë”°ë¼ì„œ `synchronize` ë¥¼ ì ì ˆíˆ ì‚¬ìš©í•´ ì£¼ì–´ì•¼í•œë‹¤! ë˜í•œ ì½”ë“œê°€ ê¸¸ì–´ì§€ê¸°ë„ í•œë‹¤. í•˜ì§€ë§Œ ì´ëŠ” spring ì—ì„œëŠ” ê°„ë‹¨íˆ singleton ì„ ë§Œë“¤ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ ê´œì°®ë‹¤!